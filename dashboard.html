<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Dashboard</title>
   <style>
      /* Reset and Base Styles */
      * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         font-family: Arial, sans-serif;
      }

      body {
         display: flex;
         align-items: center;
         justify-content: center;
         min-height: 100vh;
         background: #1c1e29;
         color: #ffffff;
      }

      .dashboard-container {
         background: #292d3e;
         border-radius: 8px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
         width: 400px;
         padding: 20px;
         text-align: center;
      }

      .dashboard-container h2 {
         color: #00aaff;
         margin-bottom: 20px;
         font-weight: 600;
      }

      .balance-display {
         font-size: 1.5rem;
         font-weight: bold;
         margin: 20px 0;
         padding: 10px;
         background: #1a75ff;
         border-radius: 5px;
         color: #fff;
      }

      #logoutButton {
         margin-top: 20px;
         padding: 10px 20px;
         background: #ff4747;
         color: #fff;
         font-weight: bold;
         border: none;
         border-radius: 4px;
         cursor: pointer;
         transition: background 0.3s;
      }

      #logoutButton:hover {
         background: #d43c3c;
      }
   </style>
</head>
<body>
   <div class="dashboard-container">
      <h2>Welcome to Your Dashboard</h2>
      <p>Your Balance: à§³<span id="userBalance">0</span></p>
      <button id="logoutButton">Logout</button>
   </div>

   <!-- Firebase SDKs -->
   <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

   <script>
      // Firebase configuration
      const firebaseConfig = {
         apiKey: "AIzaSyDr6dc3a-LUQwvtvnrb006fjhhaXlZTT1k",
         authDomain: "sphere-tournament.firebaseapp.com",
         projectId: "sphere-tournament",
         storageBucket: "sphere-tournament.firebasestorage.app",
         messagingSenderId: "49933225091",
         appId: "1:49933225091:web:b1f3fe657491c94b2f9fb6",
         measurementId: "G-EPKCPTL47V"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();

      // Display user's balance
      function displayBalance() {
         auth.onAuthStateChanged(user => {
            if (user) {
               db.collection("users").doc(user.uid).get()
                  .then(doc => {
                     if (doc.exists) {
                        const balance = doc.data().balance || 0;
                        document.getElementById("userBalance").innerText = balance;
                     } else {
                        alert("No balance data found.");
                     }
                  })
                  .catch(error => console.error("Error fetching balance:", error));
            } else {
               window.location.href = "login.html"; // Redirect to login if not logged in
            }
         });
      }

      // Logout function
      document.getElementById("logoutButton").onclick = function() {
         auth.signOut()
            .then(() => window.location.href = "login.html")
            .catch(error => console.error("Error signing out:", error));
      };

      // Run balance display on page load
      displayBalance();
   </script>
</body>
</html>
